<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
  <t t-name="iboard.Board" owl="1">
      <div class="">
          <link rel="preconnect" href="https://fonts.googleapis.com"/>
          <link rel="preconnect" href="https://fonts.gstatic.com"/>
          <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&amp;display=swap"
                rel="stylesheet"/>
          <link href="/iboard/static/src/css/board.css" rel="stylesheet"/>
          <link href="/iboard/static/src/css/dashboard_gridstack.css" rel="stylesheet"/>

          <div class="o_control_panel">
              <div class="row">
                  <div class="col-sm-6 col-xs-12">
                                <span id="ks_dashboard_title_label" class="ks_am_element">
                                    <t t-out="state.boardName"/>
                                </span>
                  </div>
                  <div class="col-sm-6 col-xs-12">
                        <t t-call="iboard.BoardHeaderOptions"/>
                  </div>
          </div>
       </div>
          <div class="iboard-body">
              <div class="grid-stack">
                    <ChartFactory
                            t-foreach="state.charts"
                            t-as="chart"
                            t-key="chart.id"
                            chart="chart"
                            layout="state.gridConfig"
                            colors="state.colors"
                            t-on-resize_chart="resize_chart"

                    />
              </div>
        </div>
      </div>
  </t>
    <t t-name="iboard.ChartFactory" owl="1">
        <t t-component="getChart"
           t-props="props"
        />
</t>
    <t t-name="iboard.BoardHeaderOptions" owl="1">
     <div class="">
              <button type="button"
                      class="btn btn-outline-primary btn-sm float-right ml-2"
                      t-att-class="state.staticGrid ? '':'d-none'"
                      t-on-click="editLayout">
                <i class="fa fa-edit"/>
                  Editar layout
            </button>
         <button type="button"
                 class="btn btn-outline-info btn-sm float-right ml-2"
                 t-att-class="state.staticGrid ? '':'d-none'"
                 t-on-click="addChart">
                <i class="fa fa-area-chart"/>
             Agregar gráfica
            </button>
         <button type="button"
                 class="btn btn-outline-secondary btn-sm float-right"
                 t-att-class="state.staticGrid ? 'd-none':''"
                 t-on-click="(ev)=>this.editLayoutSave(ev)">
                    <i class="fa fa-edit"/>
             Guardar layout
         </button>

     </div>
    </t>

    <t t-name="iboard.BaseChart" owl="1">
        <GenericContainerBaseChart
                slots="props"
                editChart="editChart"
        >
            <t t-set-slot="content">
                <div class="toolTip" t-attf-id="tooltip_{{ props.chart.id }}"/>

                <svg t-attf-id="chart_{{ props.chart.id }}"/>
            </t>
        </GenericContainerBaseChart>
    </t>

    <t t-name="iboard.ChartJS" owl="1">
          <GenericContainerBaseChart
                  slots="props"
                  editChart="editChart"
          >
              <t t-set-slot="content">
                  <div class="chart-container"
                       style="width: 100%;height: 100%;">
                        <canvas t-attf-id="chart_canvas_{{ props.chart.id }}"/>
                  </div>
              </t>
          </GenericContainerBaseChart>
    </t>

    <t t-name="GenericContainerBaseChart" owl="1">
          <div class="grid-stack-item"
               t-on-resize_chart="resize_chart"
               t-att-gs-h="props.slots.chart.config.gsMinHeight"
               t-att-gs-w="props.slots.chart.config.gsMinWidth"
               t-att-gs-min-h="2"
               t-att-gs-min-w="2"
               t-att-id="props.slots.chart.id"
               t-att-gs-x="props.slots.layout[props.slots.chart.id].x"
               t-att-gs-y="props.slots.layout[props.slots.chart.id].y"
          >
        <div class="iboard_kanban  iboard_base grid-stack-item-content">

            <div class="oe_kanban_card oe_kanban_global_click o_kanban_record ">
                <div class="row">
                    <div class="col-1">
                      <t t-call="iboard.MenuContainer"/>
                    </div>
                    <div class="col-10">
                    <h4 class="o_kanban_record_title p-1 indicator-card-title">
                                <span>
                                    <t t-esc="props.slots.chart.title"/>
                                </span>
                        </h4>
                    </div>
                </div>
                <div class="row">
                <div class="col-12 ml-1" t-attf-id="chart_body_{{props.slots.chart.id}}">
                </div>
                    <div class="w-100" t-attf-id="content_{{props.slots.chart.id}}">
                        <t t-slot="content"/>
                </div>
            </div>
        </div>
        </div>
        </div>
    </t>


    <t t-name="iboard.MenuContainer" owl="1">
    <div class="dropdown" modifiers="{}">
        <a role="button" class="dropdown-toggle o-no-caret btn" data-toggle="dropdown"
           data-display="static" href="#" aria-label="Menú desplegable" title="Menú desplegable"
           modifiers="{}">
        <span class="fa fa-ellipsis-v" modifiers="{}"></span>
    </a>
        <div class="dropdown-menu" role="menu" modifiers="{}">
        <a role="menuitem" class="dropdown-item oe_kanban_action oe_kanban_action_a"
           modifiers="{}" data-type="edit" href="#"
           t-on-click="editChart"
        >Editar</a>
            <a role="menuitem" class="dropdown-item oe_kanban_action oe_kanban_action_a"
               modifiers="{}" data-type="object" data-name="action_send_survey"
               href="#">Compartir
        </a>
            <a role="menuitem" class="dropdown-item oe_kanban_action oe_kanban_action_a"
               modifiers="{}" data-type="delete" href="#">Eliminar
        </a>
            <div role="separator" class="dropdown-divider" modifiers="{}"></div>
            <a role="menuitem" class="dropdown-item oe_kanban_action oe_kanban_action_a"
               modifiers="{}" data-type="delete" href="#">Ajustes
        </a>
    </div>
</div>
</t>


        </templates>